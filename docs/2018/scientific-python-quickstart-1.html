<!DOCTYPE html>
<html lang="tw">
    <head>
        <title> 
    Python 科學計算快速入門 1/2 | Yu-Cheng Huang
 </title>

        
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
        <link rel="shortcut icon" type="image/jpeg" href="/blog/abouts/me.jpg" />
        
        
        <link rel="stylesheet" href="/blog/style.min.css">

        
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js"></script>
        

        
        
            <script async src="https://www.googletagmanager.com/gtag/js?id=UA-96104654-1"></script>
            <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());
                gtag('config', 'UA-96104654-1');
            </script>
        

        
        

    </head>

    <body>
        
        <header>
    
    
    <div class="icon">
        <a href="http://amoshyc.github.io/blog"><img src="/blog/abouts/me.jpg" alt="me"></a>
    </div>

    
    <div class="name">
        <a href="http://amoshyc.github.io/blog">Yu-Cheng Huang</a>
    </div>

    
    <div class="menu">
        <a href="/blog/abouts.html">ABOUT</a>
        <a href="/blog/categories.html">CATEGORY</a>
        <a href="/blog/tags.html">TAG</a>
    </div>

</header>

        
        <main>
            
    <article>

    
    <div class="info">
        <div class="top">
            <span title="Date">2018/03/20</span>
            <span>@</span>
            <span>
                
                   
                   <a href="http://amoshyc.github.io/blog/categories/%E6%95%99%E5%AD%B8.html">教學</a>
                
                   , 
                   <a href="http://amoshyc.github.io/blog/categories/python-%E7%A7%91%E5%AD%B8%E8%A8%88%E7%AE%97%E5%BF%AB%E9%80%9F%E5%85%A5%E9%96%80.html">Python 科學計算快速入門</a>
                
            </span>
        </div>

        <h1 class="title">Python 科學計算快速入門 1/2</h1>

        <div class="bottom">
            
        </div>
    </div>

    
    
    <div class="md-content">
        
        
            <div class="toc">
                <span>TOC</span>
                <nav id="TableOfContents">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#virtual-environment">Virtual Environment</a></li>
<li><a href="#editor-ide">Editor/IDE</a></li>
<li><a href="#input-output">Input/Output</a></li>
<li><a href="#variable">Variable</a>
<ul>
<li><a href="#types">Types</a></li>
<li><a href="#usage">Usage</a>
<ul>
<li><a href="#list">List</a></li>
<li><a href="#tuple">Tuple</a></li>
<li><a href="#indexing-slicing">Indexing &amp; Slicing</a></li>
<li><a href="#dict">Dict</a></li>
<li><a href="#str">Str</a></li>
</ul></li>
<li><a href="#management">Management</a></li>
<li><a href="#scope">Scope</a></li>
</ul></li>
<li><a href="#control-flow">Control Flow</a>
<ul>
<li><a href="#if">If</a>
<ul>
<li><a href="#syntax">Syntax</a></li>
<li><a href="#details">Details</a></li>
</ul></li>
<li><a href="#for-while">For, While</a>
<ul>
<li><a href="#syntax-1">Syntax</a></li>
<li><a href="#frequently-used-patterns">Frequently Used Patterns</a></li>
</ul></li>
<li><a href="#with">With</a></li>
</ul></li>
<li><a href="#function">Function</a>
<ul>
<li><a href="#syntax-2">Syntax</a></li>
<li><a href="#multi-returned-value">Multi Returned Value</a></li>
<li><a href="#generator">Generator</a></li>
<li><a href="#built-in-functions">Built-in functions</a></li>
</ul></li>
<li><a href="#classes">Classes</a></li>
<li><a href="#modules">Modules</a>
<ul>
<li><a href="#import-as">import &hellip; as &hellip;</a></li>
<li><a href="#from-import-as">from &hellip; import &hellip; as &hellip;</a></li>
<li><a href="#good-practice">Good Practice</a></li>
</ul></li>
<li><a href="#pep-8-exception">PEP 8 &amp; Exception</a></li>
<li><a href="#example">Example</a></li>
</ul>
</nav>
            </div>
        
        
        

<h1 id="introduction">Introduction</h1>

<p>Python</p>

<ul>
<li>Interpreter</li>
<li>一行一行執行</li>
<li>Use indention</li>
<li>Python 3.6</li>
</ul>

<h1 id="virtual-environment">Virtual Environment</h1>

<p>主流是 <a href="https://conda.io/docs/index.html">Conda</a>，共分兩個版本：Anaconda, Miniconda。前者預設就安裝了非常多的 package，所以要非常大的硬碟空間（3GB+）<sup class="footnote-ref" id="fnref:1"><a href="#fn:1">1</a></sup>。但大部份 package 我們都不會用，所以推薦使用 Miniconda。</p>

<p>安裝方法為去<a href="https://conda.io/miniconda.html">官方</a>下載 bash，並執行，一般來說會將 conda 的執行檔加進系統的 bash：</p>

<p><img src="https://i.imgur.com/UEfGHFG.png" alt="Imgur" />
<img src="https://i.imgur.com/BdeSAbN.png" alt="Imgur" />
<img src="https://i.imgur.com/dBmtUQn.png" alt="Imgur" /></p>

<h1 id="editor-ide">Editor/IDE</h1>


<figure>
    
        <img src="https://i.imgur.com/uYc2fTG.png" width="500" />
    
    
    <figcaption>
        <h4>ides</h4>
        
    </figcaption>
    
</figure>


<p><img src="https://i.imgur.com/GPTlb2u.png" alt="Imgur" /></p>

<h1 id="input-output">Input/Output</h1>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="nb">input</span><span class="p">()</span>
<span class="n">_</span> <span class="o">=</span> <span class="nb">input</span><span class="p">()</span>
<span class="n">x</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;&gt; &#39;</span><span class="p">)</span>         <span class="c1"># x is str</span>
<span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;&gt; &#39;</span><span class="p">))</span>    </code></pre></td></tr></table>
</div>
</div>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">loss</span> <span class="o">=</span> <span class="mf">2e-1</span>
<span class="n">acc</span> <span class="o">=</span> <span class="mf">0.98</span>
<span class="k">print</span><span class="p">(</span><span class="n">loss</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">loss</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;loss:&#39;</span><span class="p">,</span> <span class="n">loss</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;acc:&#39;</span><span class="p">,</span> <span class="n">acc</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;loss: {:.2f}, acc: {:.2f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">loss</span><span class="p">,</span> <span class="n">acc</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="sa"></span><span class="s1">&#39;loss: {loss:.2f}, acc: {acc:.2f}&#39;</span><span class="p">)</span> <span class="c1"># format literal</span>
<span class="k">print</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;loss: </span><span class="si">%.2f</span><span class="s1">, acc: </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">loss</span><span class="p">,</span> <span class="n">acc</span><span class="p">))</span>
<span class="c1"># 0.2</span>
<span class="c1"># &lt;class &#39;float&#39;&gt;</span>
<span class="c1"># loss: 0.2 acc: 0.98</span>
<span class="c1"># loss: 0.20, acc: 0.98</span>
<span class="c1"># loss: 0.20, acc: 0.98</span>
<span class="c1"># loss: 0.20, acc: 0.98</span></code></pre></td></tr></table>
</div>
</div>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># This is a comment</span>
<span class="sa"></span><span class="s1">&#39;&#39;&#39;doc or long
</span><span class="s1">comment&#39;&#39;&#39;</span></code></pre></td></tr></table>
</div>
</div>

<h1 id="variable">Variable</h1>

<h2 id="types">Types</h2>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">a</span> <span class="o">=</span> <span class="mi">123456789123456789</span>      <span class="c1"># int（任意精度）</span>
<span class="n">b</span> <span class="o">=</span> <span class="mf">1e-16</span>                   <span class="c1"># float</span>
<span class="n">c</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">+</span> <span class="mf">1.0j</span>              <span class="c1"># complex</span>
<span class="n">d</span> <span class="o">=</span> <span class="p">(</span><span class="bp">True</span> <span class="ow">or</span> <span class="bp">False</span><span class="p">)</span>         <span class="c1"># boolean</span>

<span class="n">e</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>               <span class="c1"># list</span>
<span class="n">f</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>               <span class="c1"># tuple</span>
<span class="n">g</span> <span class="o">=</span> <span class="p">{</span><span class="sa"></span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>        <span class="c1"># dict</span>
<span class="n">h</span> <span class="o">=</span> <span class="sa"></span><span class="s1">&#39;string&#39;</span>                <span class="c1"># str</span>

<span class="n">l</span> <span class="o">=</span> <span class="bp">None</span>                    <span class="c1"># None</span></code></pre></td></tr></table>
</div>
</div>

<h2 id="usage">Usage</h2>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span><span class="lnt">5</span><span class="lnt">6</span><span class="lnt">7</span><span class="lnt">8</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="mi">2</span> <span class="o">^</span> <span class="mi">1</span>                   <span class="c1"># xor: 3</span>
<span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="mi">3</span> <span class="o">*</span> <span class="mi">4</span>         <span class="c1"># +-*: -9</span>
<span class="mi">5</span> <span class="o">/</span> <span class="mi">3</span>                   <span class="c1"># true division: 1.667 (float)</span>
<span class="mi">5</span> <span class="o">//</span> <span class="mi">3</span>                  <span class="c1"># division: 1 (int)</span>
<span class="mi">5</span> <span class="o">%</span> <span class="mi">3</span>                   <span class="c1"># mod: 2</span>
<span class="n">i</span> <span class="o">**</span> <span class="mi">5</span>                  <span class="c1"># pow: 32</span>
<span class="nb">float</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>                <span class="c1"># 1.0 (float)</span>
<span class="nb">int</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>                <span class="c1"># 1 (int)</span></code></pre></td></tr></table>
</div>
</div>

<h3 id="list">List</h3>

<p>mutable</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">l</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;abc&#39;</span><span class="p">)</span>         <span class="c1"># l: [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</span>
<span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="sa"></span><span class="s1">&#39;d&#39;</span>              <span class="c1"># l: [&#39;a&#39;, &#39;d&#39;, &#39;c&#39;]</span>
<span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>             <span class="c1"># l: [&#39;a&#39;, &#39;d&#39;, &#39;c&#39;, 1]</span>
<span class="n">l</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>        <span class="c1"># l: [&#39;a&#39;, &#39;d&#39;, &#39;c&#39;, 1, 2, 3]</span></code></pre></td></tr></table>
</div>
</div>

<h3 id="tuple">Tuple</h3>

<p>immutable</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">t</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;abc&#39;</span><span class="p">)</span>        <span class="c1"># t: (&#39;a&#39;, &#39;b&#39;, &#39;c&#39;)</span>
<span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="sa"></span><span class="s1">&#39;d&#39;</span>              <span class="c1"># error</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">t</span>             <span class="c1"># x: &#39;a&#39;, y: &#39;b&#39;, z: &#39;c&#39;</span>
<span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span>             <span class="c1"># parenthesis omitted</span></code></pre></td></tr></table>
</div>
</div>

<h3 id="indexing-slicing">Indexing &amp; Slicing</h3>

<ul>
<li>index 從 <code>0</code> 開始數，可正可負</li>
<li><code>start:end:step</code>, <code>step</code> is optional,</li>
<li>default to <code>[0:len():1]</code></li>
<li>slice return a <strong>copy</strong></li>
</ul>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span><span class="lnt">5</span><span class="lnt">6</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>                  <span class="c1"># 5</span>
<span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">l</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>            <span class="c1"># 0 + 4 = 4</span>
<span class="n">l</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>                 <span class="c1"># [2, 3]</span>
<span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>                <span class="c1"># [0, 2, 4]</span>
<span class="n">l</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>                 <span class="c1"># [4, 3, 2, 1, 0]</span></code></pre></td></tr></table>
</div>
</div>

<h3 id="dict">Dict</h3>

<p>mutable</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span><span class="lnt">5</span><span class="lnt">6</span><span class="lnt">7</span><span class="lnt">8</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">d</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">({</span><span class="sa"></span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
<span class="n">d</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>              <span class="c1"># d: {&#39;a&#39;: 0, &#39;b&#39;: 2}</span>
<span class="n">d</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;c&#39;</span><span class="p">]</span>                  <span class="c1"># error</span>
<span class="sa"></span><span class="s1">&#39;c&#39;</span> <span class="ow">in</span> <span class="n">d</span>                <span class="c1"># False</span>
<span class="n">d</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="sa"></span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>      <span class="c1"># d: {&#39;a&#39;: 3, &#39;b&#39;: 2}</span>
<span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>               <span class="c1"># [(&#39;a&#39;, 0), (&#39;b&#39;, 2)]</span>
<span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>                <span class="c1"># [&#39;a&#39;, &#39;b&#39;]</span>
<span class="n">d</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>              <span class="c1"># [0, 2]</span></code></pre></td></tr></table>
</div>
</div>

<h3 id="str">Str</h3>

<p>immutable</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">a</span> <span class="o">=</span> <span class="sa"></span><span class="s1">&#39;單引號&#39;</span>
<span class="n">b</span> <span class="o">=</span> <span class="sa"></span><span class="s2">&#34;雙引號&#34;</span>
<span class="n">c</span> <span class="o">=</span> <span class="sa"></span><span class="s2">&#34;It&#39;s time&#34;</span>         <span class="c1"># mix</span>
<span class="n">d</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;\n\t\b&#39;</span>           <span class="c1"># raw string</span>
<span class="n">e</span> <span class="o">=</span> <span class="sa"></span><span class="s1">&#39;&#39;&#39;多
</span><span class="s1">行&#39;&#39;&#39;</span>
<span class="n">f</span> <span class="o">=</span> <span class="sa"></span><span class="s1">&#39;-&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa"></span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;def&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;xyz&#39;</span><span class="p">])</span> <span class="c1"># abc-def-xyz</span>
<span class="n">g</span> <span class="o">=</span> <span class="sa"></span><span class="s1">&#39;a b c&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>     <span class="c1"># [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</span>
<span class="n">h</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;a b c&#39;</span><span class="p">)</span>        <span class="c1"># 5</span>
<span class="n">i</span> <span class="o">=</span> <span class="sa"></span><span class="s1">&#39;pp&#39;</span> <span class="ow">in</span> <span class="sa"></span><span class="s1">&#39;apple&#39;</span>     <span class="c1"># True</span>
<span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="sa"></span><span class="s1">&#39;我&#39;</span>             <span class="c1"># error</span></code></pre></td></tr></table>
</div>
</div>

<h2 id="management">Management</h2>

<p>Python is <strong>strong</strong>, <strong>dynamic</strong> and has GC system.</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="sa"></span><span class="s1">&#39;a&#39;</span> <span class="o">+</span> <span class="mi">1</span>     <span class="c1"># error</span>
<span class="n">x</span> <span class="o">=</span> <span class="sa"></span><span class="s1">&#39;s&#39;</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>       <span class="c1"># Valid</span></code></pre></td></tr></table>
</div>
</div>

<blockquote>
<p><code>a = value</code>: 在記憶體中建立值為 value 的物件，讓變數名稱 a 指向他
<code>a = b</code>: 讓變數名稱 a 指向「變數名稱 b 所指的物件」</p>
</blockquote>

<p><img src="https://i.imgur.com/Tdj6WnD.png" alt="Imgur" /></p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span><span class="lnt">5</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">a</span> <span class="o">=</span> <span class="mi">998</span> <span class="c1"># id(a) = 0x7f1f564d27d0</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">999</span> <span class="c1"># id(b) = 0x7f1f564d2a50</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">b</span>   <span class="c1"># a, b = 999, 999; id(a), id(b) = 0x7f1f564d2a50, 0x7f1f564d2a50</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">997</span> <span class="c1"># a, b = 999, 997; id(a), id(b) = 0x7f1f564d2a50, 0x7f1f564ec330</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span>   <span class="c1"># a, b = 999, 999; id(a), id(b) = 0x7f1f564d2a50, 0x7f1f564d2a50</span></code></pre></td></tr></table>
</div>
</div>

<p>Python 為了效率，預先將數字 -5 ~ 256 都先建好物件了，所以會有一個有趣現象</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span><span class="lnt">5</span><span class="lnt">6</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">print</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="nb">id</span><span class="p">(</span><span class="n">b</span><span class="p">))</span> <span class="c1"># True</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="k">print</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="nb">id</span><span class="p">(</span><span class="n">b</span><span class="p">))</span> <span class="c1"># False</span></code></pre></td></tr></table>
</div>
</div>

<h2 id="scope">Scope</h2>

<p>有別於 C/C++/JAVA，Python 變數的 scope 是看函式。</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">b</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
    <span class="k">if</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="c1"># Valid</span>

    <span class="c1"># 告訴 python 之後我要使用全域命名空間中的那個變數 b</span>
    <span class="c1"># 不加的話，python 會視為創造了 local 變數 b</span>
    <span class="k">global</span> <span class="n">b</span>
    <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">f</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>    <span class="c1"># 2</span></code></pre></td></tr></table>
</div>
</div>

<h1 id="control-flow">Control Flow</h1>

<h2 id="if">If</h2>

<h3 id="syntax">Syntax</h3>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span><span class="lnt">5</span><span class="lnt">6</span><span class="lnt">7</span><span class="lnt">8</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="o">...</span><span class="p">:</span>
    <span class="k">pass</span>
<span class="k">elif</span> <span class="o">...</span><span class="p">:</span>
    <span class="k">pass</span>
<span class="k">elif</span> <span class="o">...</span><span class="p">:</span>
    <span class="k">pass</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">pass</span></code></pre></td></tr></table>
</div>
</div>

<h3 id="details">Details</h3>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">(),</span> <span class="p">{}</span>   <span class="c1"># False Condition</span>
<span class="ow">and</span><span class="p">,</span> <span class="ow">or</span><span class="p">,</span> <span class="ow">not</span>                    <span class="c1"># Operations</span>
<span class="o">&lt;</span><span class="p">,</span> <span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;=</span><span class="p">,</span> <span class="o">=&gt;</span><span class="p">,</span> <span class="o">!=</span><span class="p">,</span> <span class="ow">is</span><span class="p">,</span> <span class="ow">is</span> <span class="ow">not</span>    <span class="c1"># Comparison</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="k">if</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">0</span><span class="p">)</span>         <span class="c1"># Ternary operator</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># Short-circuit evaluation</span>
    <span class="k">pass</span> <span class="c1"># i.e. &#39;;&#39; in C</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">pass</span></code></pre></td></tr></table>
</div>
</div>

<p><code>==</code> 與 <code>is</code> 的差別在於 <code>==</code> 是比較值是不是相同的；而 <code>is</code> 是比較是不是指向記憶體中同一個物件，即他們的 <code>id()</code> 是不是相同的。如果你寫過 javascript，這個相同於 <code>==</code> 與 <code>===</code>。</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">a</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">1000</span>

<span class="n">a</span> <span class="o">==</span> <span class="n">b</span>              <span class="c1"># True</span>
<span class="n">a</span> <span class="ow">is</span> <span class="n">b</span>              <span class="c1"># False</span>
<span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="nb">id</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>      <span class="c1"># False</span>

<span class="n">b</span> <span class="o">=</span> <span class="n">a</span>

<span class="n">a</span> <span class="o">==</span> <span class="n">b</span>              <span class="c1"># True</span>
<span class="n">a</span> <span class="ow">is</span> <span class="n">b</span>              <span class="c1"># True</span>
<span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="nb">id</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>      <span class="c1"># True</span></code></pre></td></tr></table>
</div>
</div>

<p><code>is</code> 的比較速度比 <code>==</code> 快上許多，如果再綜合之前所說的，Python 會將 -5 ~ 256 這幾個值都先建好物件，那如果我們知道變數的值在這個範圍，是可以用 <code>is</code> 來取代 <code>==</code> 的，但強烈 <strong>不建議</strong> 這麼做，因為如果一不小心，變數的值超出這個範圍，你的程式就壞掉了，而且這個範圍會隨著你的平臺，使用的 python 版本而變化。</p>

<p>唯一的例外是測試一個變數是不是 <code>None</code> 時，<code>None</code> 也是一個常駐記憶體的常量，因為每個 python 版本都一定會這個變數，因為在這個情況下，我們會使用 <code>is</code> 而不是 <code>==</code>。</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span><span class="lnt">5</span><span class="lnt">6</span><span class="lnt">7</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">a</span> <span class="o">=</span> <span class="bp">None</span>
<span class="n">b</span> <span class="o">=</span> <span class="bp">None</span>

<span class="n">a</span> <span class="o">==</span> <span class="n">b</span>              <span class="c1"># True</span>
<span class="n">a</span> <span class="ow">is</span> <span class="n">b</span>              <span class="c1"># True</span>
<span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="nb">id</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>      <span class="c1"># True</span>
<span class="n">a</span> <span class="o">==</span> <span class="bp">None</span></code></pre></td></tr></table>
</div>
</div>

<p>所以程式碼中常會看到</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span><span class="lnt">5</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="n">xxx</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="k">if</span> <span class="n">xxx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">pass</span></code></pre></td></tr></table>
</div>
</div>

<h2 id="for-while">For, While</h2>

<h3 id="syntax-1">Syntax</h3>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span><span class="lnt">5</span><span class="lnt">6</span><span class="lnt">7</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="k">for</span> <span class="o">...</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">iterable</span><span class="o">&gt;</span><span class="p">:</span>
    <span class="c1"># do something</span>
    <span class="c1"># break, continue, etc</span>

<span class="k">while</span> <span class="o">...</span><span class="p">:</span>
    <span class="c1"># do something</span>
    <span class="c1"># break, continue, etc</span></code></pre></td></tr></table>
</div>
</div>

<h3 id="frequently-used-patterns">Frequently Used Patterns</h3>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span><span class="lnt">16</span><span class="lnt">17</span><span class="lnt">18</span><span class="lnt">19</span><span class="lnt">20</span><span class="lnt">21</span><span class="lnt">22</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="sa"></span><span class="s1">&#39;&#39;&#39; Loop certain times &#39;&#39;&#39;</span>
<span class="k">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)))</span> <span class="c1"># [0, 1, 2]</span>
<span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="sa"></span><span class="s1">&#39;&#39;&#39; Iterate items of a list &#39;&#39;&#39;</span>
<span class="n">A</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">A</span><span class="p">:</span> <span class="c1"># a is a copy of each item</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">a</span>   <span class="c1"># will NOT modify A</span>
<span class="c1"># A: [1, 2, 3]</span>

<span class="sa"></span><span class="s1">&#39;&#39;&#39; Iterate indices of a list &#39;&#39;&#39;</span>
<span class="n">A</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">)):</span>
    <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<span class="c1"># A: [2, 4, 6]</span>

<span class="sa"></span><span class="s1">&#39;&#39;&#39; Iterate indices, items of a list &#39;&#39;&#39;</span>
<span class="n">A</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">A</span><span class="p">):</span> <span class="c1"># a is a copy</span>
    <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">a</span>
<span class="c1"># A: [2, 4, 6]</span></code></pre></td></tr></table>
</div>
</div>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span><span class="lnt">16</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="sa"></span><span class="s1">&#39;&#39;&#39; Iterate items of 2 lists &#39;&#39;&#39;</span>
<span class="n">A</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">B</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">C</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">)]</span> <span class="c1"># [4, 4, 4]</span>

<span class="sa"></span><span class="s1">&#39;&#39;&#39; Iterate over dict &#39;&#39;&#39;</span>
<span class="n">C</span> <span class="o">=</span> <span class="p">{</span><span class="sa"></span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">C</span><span class="o">.</span><span class="n">items</span><span class="p">():</span> <span class="c1"># k, v is copies</span>
    <span class="n">C</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">v</span>
<span class="c1"># C: {&#39;a&#39;: 0, &#39;b&#39;: 2}</span>

<span class="sa"></span><span class="s1">&#39;&#39;&#39; List comprehension&#39;&#39;&#39;</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>          
<span class="n">b</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">a</span><span class="p">]</span>         <span class="c1"># [0, 1, 0, 1, 0, 1]</span>
<span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">a</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">]</span>      <span class="c1"># [4, 5]</span>
<span class="n">d</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="mi">1</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">a</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">])</span> <span class="c1"># 2</span></code></pre></td></tr></table>
</div>
</div>

<hr />

<p>For with else</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span><span class="lnt">5</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="k">for</span> <span class="o">...</span><span class="p">:</span>
    <span class="k">if</span> <span class="o">...</span><span class="p">:</span>
        <span class="k">pass</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">pass</span></code></pre></td></tr></table>
</div>
</div>

<p>對等的 C 寫成</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">bool</span> <span class="n">flag</span> <span class="o">=</span> <span class="n">False</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(...)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(...)</span> <span class="p">{</span>
        <span class="n">flag</span> <span class="o">=</span> <span class="n">True</span><span class="p">;</span>
        <span class="p">...</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">flag</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">...</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>

<h2 id="with">With</h2>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span><span class="lnt">5</span><span class="lnt">6</span><span class="lnt">7</span><span class="lnt">8</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="sa"></span><span class="s1">&#39;&#39;&#39; something that need to be closed &#39;&#39;&#39;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;./test.txt&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="o">...</span>

<span class="c1"># equivalent to</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;./test.txt&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></code></pre></td></tr></table>
</div>
</div>

<h1 id="function">Function</h1>

<h2 id="syntax-2">Syntax</h2>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span><span class="lnt">16</span><span class="lnt">17</span><span class="lnt">18</span><span class="lnt">19</span><span class="lnt">20</span><span class="lnt">21</span><span class="lnt">22</span><span class="lnt">23</span><span class="lnt">24</span><span class="lnt">25</span><span class="lnt">26</span><span class="lnt">27</span><span class="lnt">28</span><span class="lnt">29</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">n1</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span> <span class="n">n2</span><span class="o">=</span><span class="mi">456</span><span class="p">):</span>
    <span class="sa"></span><span class="s2">&#34;&#34;&#34;Doc string of this function.
</span><span class="s2">    Arguments in Python is **passed by assignment**.
</span><span class="s2">
</span><span class="s2">    Parameters
</span><span class="s2">    ----------
</span><span class="s2">    p1, p2: positional arguments
</span><span class="s2">        Necessary arguments and placed before any named arguments.
</span><span class="s2">    n1, n2: named arguments, optional
</span><span class="s2">        Arguments with default value, can be specified by name.
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="n">p1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>    <span class="c1"># valid, is visible outside (i.e. a now is [1])</span>
    <span class="n">p1</span> <span class="o">=</span> <span class="p">[]</span>         <span class="c1"># valid, p1 now points to another list</span>
    <span class="n">p2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>    <span class="c1"># error, because b is immutable</span>
    <span class="n">p2</span> <span class="o">=</span> <span class="sa"></span><span class="s1">&#39;&#39;</span>         <span class="c1"># valid, p2 now points to a empty str</span>

    <span class="k">return</span> <span class="o">...</span>      <span class="c1"># optional</span>

<span class="sa"></span><span class="s1">&#39;&#39;&#39; invoked by &#39;&#39;&#39;</span>
<span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">()</span>
<span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>                   <span class="c1"># p1 = [], p2 = [], n1 = 123, n2 = 456</span>
<span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="mi">789</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>          <span class="c1"># p1 = [], p2 = [], n1 = 789, n2 = -1</span>
<span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">n2</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>            <span class="c1"># p1 = [], p2 = [], n1 = 123, n2 = -1</span>
<span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">n2</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">n1</span><span class="o">=</span><span class="mi">789</span><span class="p">)</span>    <span class="c1"># p1 = [], p2 = [], n1 = 789, n2 = -1</span>

<span class="sa"></span><span class="s1">&#39;&#39;&#39; Unpacking arguments &#39;&#39;&#39;</span>
<span class="n">args</span> <span class="o">=</span> <span class="p">([],</span> <span class="p">())</span>
<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="sa"></span><span class="s1">&#39;n1&#39;</span><span class="p">:</span> <span class="mi">789</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;n2&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">}</span>
<span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>

<h2 id="multi-returned-value">Multi Returned Value</h2>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="k">def</span> <span class="nf">ae_loss</span><span class="p">(</span><span class="n">y_pred</span><span class="p">):</span>
    <span class="n">loss1</span> <span class="o">=</span> <span class="o">...</span>
    <span class="n">loss2</span> <span class="o">=</span> <span class="o">...</span>
    <span class="k">return</span> <span class="n">loss1</span><span class="p">,</span> <span class="n">loss2</span> <span class="c1"># i.e. return a tuple (loss1, loss2)</span>

<span class="sa"></span><span class="s1">&#39;&#39;&#39; invoked by &#39;&#39;&#39;</span>
<span class="n">losses</span> <span class="o">=</span> <span class="n">ae_loss</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>  <span class="c1"># losses is a tuple</span>
<span class="n">l1</span><span class="p">,</span> <span class="n">l2</span> <span class="o">=</span> <span class="n">ae_loss</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>  <span class="c1"># general way</span>
<span class="n">l1</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">ae_loss</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>   <span class="c1"># discard loss2</span>
<span class="n">_</span><span class="p">,</span> <span class="n">l2</span> <span class="o">=</span> <span class="n">ae_loss</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>   <span class="c1"># discard loss1</span>
<span class="n">ae_loss</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>           <span class="c1"># discard return values</span></code></pre></td></tr></table>
</div>
</div>

<h2 id="generator">Generator</h2>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span><span class="lnt">16</span><span class="lnt">17</span><span class="lnt">18</span><span class="lnt">19</span><span class="lnt">20</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="sa"></span><span class="s1">&#39;&#39;&#39; Instead of &#39;&#39;&#39;</span>
<span class="k">def</span> <span class="nf">read_all_imgs</span><span class="p">(</span><span class="n">img_paths</span><span class="p">):</span>
    <span class="n">imgs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">img_paths</span><span class="p">:</span>
        <span class="n">imgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">load_img</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">imgs</span>

<span class="n">imgs</span> <span class="o">=</span> <span class="n">read_all_imgs</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="c1"># Too large to fit in memory</span>
<span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">imgs</span><span class="p">:</span>
    <span class="n">convert</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

<span class="sa"></span><span class="s1">&#39;&#39;&#39; Use &#39;&#39;&#39;</span>
<span class="k">def</span> <span class="nf">gen_imgs</span><span class="p">(</span><span class="n">img_paths</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">img_paths</span><span class="p">:</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">load_img</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">img</span>

<span class="n">img_gen</span> <span class="o">=</span> <span class="n">gen_imgs</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="c1"># type: &lt;class &#39;generator&#39;&gt;</span>
<span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">img_gen</span><span class="p">:</span>
    <span class="n">convert</span><span class="p">(</span><span class="n">img</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span><span class="lnt">5</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="c1"># Some builtin functions are generator,</span>
<span class="c1"># you can convert generator to values using</span>
<span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="o">...</span><span class="p">))</span>
<span class="nb">list</span><span class="p">(</span><span class="nb">enumerate</span><span class="p">(</span><span class="o">...</span><span class="p">))</span>
<span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">...</span><span class="p">))</span></code></pre></td></tr></table>
</div>
</div>

<h2 id="built-in-functions">Built-in functions</h2>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span><span class="lnt">16</span><span class="lnt">17</span><span class="lnt">18</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span> <span class="c1"># [start, start + step, start + 2 * step, ...]</span>
<span class="nb">enumerate</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>            <span class="c1"># [(0, A[0]), (1, A[1]), (2, A[2]), ...]   </span>
<span class="nb">zip</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span>            <span class="c1"># [(A[0], B[0], C[0]), (A[1], B[1], C[1]), ...]</span>

<span class="nb">any</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>                  <span class="c1"># True if any item in A is not False</span>
<span class="nb">all</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>                  <span class="c1"># True if all items in A are not False</span>
<span class="nb">sorted</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>               <span class="c1"># return sorted data, will NOT modify arguments</span>
<span class="nb">sum</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>                  <span class="c1"># sum</span>
<span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>                  <span class="c1"># length</span>
<span class="nb">max</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>                  <span class="c1"># max</span>
<span class="nb">max</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>          <span class="c1"># max</span>
<span class="nb">min</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>                  <span class="c1"># min</span>
<span class="nb">min</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>          <span class="c1"># min</span>
<span class="nb">round</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>              <span class="c1"># 2</span>
<span class="nb">int</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>                <span class="c1"># 1</span>
<span class="nb">int</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;123&#39;</span><span class="p">)</span>              <span class="c1"># 123</span>
<span class="nb">float</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;123&#39;</span><span class="p">)</span>            <span class="c1"># 123.0</span>
<span class="nb">hex</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span>                <span class="c1"># 0xff</span></code></pre></td></tr></table>
</div>
</div>

<h1 id="classes">Classes</h1>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="k">class</span> <span class="nc">Classifier</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sa"></span><span class="s1">&#39;&#39;&#39; Don&#39;t forget the first argument is self
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">var1</span> <span class="o">=</span> <span class="n">var</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">var2</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">public_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__privateMethod</span><span class="p">()</span> <span class="o">+</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">__private_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">var1</span>

<span class="n">clf</span> <span class="o">=</span> <span class="n">Classifier</span><span class="p">(</span><span class="n">var</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">clf</span><span class="o">.</span><span class="n">public_method</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span> <span class="c1"># 7</span></code></pre></td></tr></table>
</div>
</div>

<h1 id="modules">Modules</h1>

<h2 id="import-as">import &hellip; as &hellip;</h2>

<p>使用該 package 的函式、物件要前綴 package 的名稱。</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span><span class="lnt">5</span><span class="lnt">6</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
<span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="mf">1.3</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>

<h2 id="from-import-as">from &hellip; import &hellip; as &hellip;</h2>

<p>將該 package 底下的函式、物件加入當前 namespace 中。</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span><span class="lnt">5</span><span class="lnt">6</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">floor</span><span class="p">,</span> <span class="n">ceil</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">zeros</span> <span class="k">as</span> <span class="n">zs</span>

<span class="n">zs</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">floor</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
<span class="n">ceil</span><span class="p">(</span><span class="mf">1.3</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>

<h2 id="good-practice">Good Practice</h2>

<p>一般來說，程式不複雜的話寫在同一個 jupyter notebook 即可。
或檔案全在同一個資料夾，例如：</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="c1"># kaggle-catdog/</span>
<span class="c1">#     .git/</span>
<span class="c1">#     a.py</span>
<span class="c1">#     b.py</span>

<span class="sa"></span><span class="s1">&#39;&#39;&#39; a.py &#39;&#39;&#39;</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">1</span>

<span class="sa"></span><span class="s1">&#39;&#39;&#39; b.py &#39;&#39;&#39;</span>
<span class="kn">import</span> <span class="nn">a</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">f</span><span class="p">())</span>
<span class="c1"># or</span>
<span class="c1"># from a import f</span>
<span class="c1"># print(f())</span></code></pre></td></tr></table>
</div>
</div>

<p>當如果要結構化專案時，因為 python 嚴格區分 package 與 script，所以有點複雜，細節請自行找資料。底下給出二個我使用的方法：</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span><span class="lnt">16</span><span class="lnt">17</span><span class="lnt">18</span><span class="lnt">19</span><span class="lnt">20</span><span class="lnt">21</span><span class="lnt">22</span><span class="lnt">23</span><span class="lnt">24</span><span class="lnt">25</span><span class="lnt">26</span><span class="lnt">27</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="c1"># kaggle-catdog/</span>
<span class="c1">#     .git/</span>
<span class="c1">#     catdog/</span>
<span class="c1">#         __init__.py       # make catdog a package</span>
<span class="c1">#         model1/</span>
<span class="c1">#             __init__.py   # make model1 a package</span>
<span class="c1">#             feature.py</span>
<span class="c1">#             model.py</span>
<span class="c1">#             trainer.py</span>
<span class="c1">#         model2/</span>
<span class="c1">#         config.py</span>
<span class="c1">#         util.py</span>
<span class="c1">#     script1.py        # can be executed: python script1.py</span>
<span class="c1">#     script2.py        # can be executed: python script2.py   </span>

<span class="sa"></span><span class="s1">&#39;&#39;&#39; catdog/model1/model.py &#39;&#39;&#39;</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">feature</span> <span class="c1"># import modules from same folder</span>
<span class="kn">from</span> <span class="nn">..</span> <span class="kn">import</span> <span class="n">config</span><span class="p">,</span> <span class="n">util</span> <span class="c1"># import modules from parent folder</span>
<span class="o">...</span>

<span class="sa"></span><span class="s1">&#39;&#39;&#39; script1.py &#39;&#39;&#39;</span>
<span class="c1"># import module catdog/util.py</span>
<span class="kn">from</span> <span class="nn">catdot</span> <span class="kn">import</span> <span class="n">util</span>
<span class="c1"># import class in catdog/model1/trainer.py</span>
<span class="kn">from</span> <span class="nn">catdog.model1.trainer</span> <span class="kn">import</span> <span class="n">Trainer</span> 
<span class="n">trainer</span> <span class="o">=</span> <span class="n">Trainer</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">trainer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span></code></pre></td></tr></table>
</div>
</div>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span><span class="lnt">16</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="c1"># kaggle-catdog/</span>
<span class="c1">#     .git/</span>
<span class="c1">#     catdog/</span>
<span class="c1">#         __init__.py       # make catdog a package</span>
<span class="c1">#         features/</span>
<span class="c1">#             __init__.py   # make features a package</span>
<span class="c1">#             images.py</span>
<span class="c1">#             labels.py</span>
<span class="c1">#         models/</span>
<span class="c1">#             __init__.py   # make models a package</span>
<span class="c1">#             unet.py</span>
<span class="c1">#             segnet.py</span>
<span class="c1">#         config.py</span>
<span class="c1">#         util.py</span>
<span class="c1">#     script1.py        # can be executed: python script1.py</span>
<span class="c1">#     script2.py        # can be executed: python script2.py </span></code></pre></td></tr></table>
</div>
</div>

<h1 id="pep-8-exception">PEP 8 &amp; Exception</h1>

<p>Style Guide.</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="k">class</span> <span class="nc">ClassName</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">public_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">__private_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

<span class="k">def</span> <span class="nf">function_name</span><span class="p">(</span><span class="o">...</span><span class="p">):</span>
    <span class="n">CONSTANT_VAR</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">local_var</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">dir_</span> <span class="o">=</span> <span class="mi">2</span></code></pre></td></tr></table>
</div>
</div>

<p>一些常見的 linters 有 <code>autopep8</code>, <code>yapf</code>。</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span><span class="lnt">5</span><span class="lnt">6</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="k">try</span><span class="p">:</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="k">except</span> <span class="n">FileNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="k">pass</span></code></pre></td></tr></table>
</div>
</div>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span><span class="lnt">5</span><span class="lnt">6</span><span class="lnt">7</span><span class="lnt">8</span><span class="lnt">9</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;abc&#39;</span><span class="p">)</span>

<span class="n">f</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
<span class="c1"># Traceback (most recent call last):</span>
<span class="c1">#   File &#34;&lt;stdin&gt;&#34;, line 1, in &lt;module&gt;</span>
<span class="c1">#   File &#34;&lt;stdin&gt;&#34;, line 3, in f</span>
<span class="c1"># Exception: abc</span></code></pre></td></tr></table>
</div>
</div>

<h1 id="example">Example</h1>

<p>從 <code>data.rec</code> 中取出各筆資料，存成 json 格式。</p>

<pre><code>@GAISRec:
@U:http://travel.ettoday.net/article/1.htm
@T:外星人回到地球了 ETtoday.net Come home
@B:
記者吳光中／台北報導 熄燈3年半，ETtoday回來了，這次不叫「達康」，改叫「達內」...
@GAISRec:
@U:http://travel.ettoday.net/article/3.htm
@T:2011年第46屆電視金鐘奨完整入圍名單
@B:
2011年金鐘獎，ETtoday舉行臉書直播，帶網友看熱鬧也看門道。....
@GAISRec:
@U:http://travel.ettoday.net/article/7.htm
@T:豪雨特報持續 北部持續濕涼
@B:
生活中心／台北報導 受到秋颱奈格外圍環流的影響，... 
</code></pre>

<p>假設 <code>data.rec</code> 太大造成無法整個讀進記憶體，我們只能一行一行讀入資料。那我們該如果抽取出各筆資料呢？ 相信大家都會寫，而我的解法是：</p>

<ol>
<li>遇到 <code>@GAISRec:</code>，代表一筆資料的開始</li>
<li>遇到 <code>@U:</code>，取出 url</li>
<li>遇到 <code>@T:</code>，取出 title</li>
<li>遇到 <code>@B:</code>，什麼都不做</li>
<li>上述都不成立：取出 body，且這筆資料結束</li>
</ol>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span><span class="lnt">16</span><span class="lnt">17</span><span class="lnt">18</span><span class="lnt">19</span><span class="lnt">20</span><span class="lnt">21</span><span class="lnt">22</span><span class="lnt">23</span><span class="lnt">24</span><span class="lnt">25</span><span class="lnt">26</span><span class="lnt">27</span><span class="lnt">28</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">json</span>

<span class="k">def</span> <span class="nf">extract</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="c1"># 清掉字串前後的空格、換行</span>
        <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;@GAISRec:&#39;</span><span class="p">):</span>
            <span class="n">record</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;@U:&#39;</span><span class="p">):</span>
            <span class="n">record</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;url&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
        <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;@T:&#39;</span><span class="p">):</span>
            <span class="n">record</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
        <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;@B:&#39;</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">record</span><span class="p">[</span><span class="sa"></span><span class="s1">&#39;body&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">line</span>
            <span class="k">yield</span> <span class="n">record</span>


<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;./data.rec&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">record</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">extract</span><span class="p">(</span><span class="n">f</span><span class="p">)):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
        <span class="k">print</span><span class="p">()</span>

        <span class="c1"># save as json</span>
        <span class="n">filepath</span> <span class="o">=</span> <span class="n">f</span><span class="sa"></span><span class="s1">&#39;./{i:08d}.json&#39;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>

<p><img src="https://i.imgur.com/qjEEaDY.png" alt="Imgur" /></p>

<p>在這個例子中，可以看到：</p>

<ol>
<li><code>with</code> 的使用</li>
<li><code>yield</code> 的使用</li>
<li><code>enumerate</code> 的使用</li>
<li>format literal 的使用</li>
<li>slice 的使用</li>
<li>變數 scope 是看函式</li>
</ol>
<div class="footnotes">

<hr />

<ol>
<li id="fn:1"><a href="https://conda.io/docs/user-guide/install/index.html">https://conda.io/docs/user-guide/install/index.html</a>
 <a class="footnote-return" href="#fnref:1">↩</a></li>
</ol>
</div>

    </div>

    
</article>
    <div class="social">
    <a class="icon facebook" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2famoshyc.github.io%2fblog%2f2018%2fscientific-python-quickstart-1.html" title="Share to Facebook">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round"
            stroke-miterlimit="1.414">
            <path d="M15.117 0H.883C.395 0 0 .395 0 .883v14.234c0 .488.395.883.883.883h7.663V9.804H6.46V7.39h2.086V5.607c0-2.066 1.262-3.19 3.106-3.19.883 0 1.642.064 1.863.094v2.16h-1.28c-1 0-1.195.48-1.195 1.18v1.54h2.39l-.31 2.42h-2.08V16h4.077c.488 0 .883-.395.883-.883V.883C16 .395 15.605 0 15.117 0"
                fill-rule="nonzero" />
        </svg>
    </a>
    <a class="icon googleplus" target="_blank" href="https://plus.google.com/share?url=http%3a%2f%2famoshyc.github.io%2fblog%2f2018%2fscientific-python-quickstart-1.html" title="Share to Google+">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round"
            stroke-miterlimit="1.414">
            <path d="M5.09 7.273v1.745h2.89c-.116.75-.873 2.197-2.887 2.197-1.737 0-3.155-1.44-3.155-3.215S3.353 4.785 5.09 4.785c.99 0 1.652.422 2.03.786l1.382-1.33c-.887-.83-2.037-1.33-3.41-1.33C2.275 2.91 0 5.19 0 8s2.276 5.09 5.09 5.09c2.94 0 4.888-2.065 4.888-4.974 0-.334-.036-.59-.08-.843H5.09zm10.91 0h-1.455V5.818H13.09v1.455h-1.454v1.454h1.455v1.455h1.46V8.727H16"
            />
        </svg>
    </a>
    <a class="icon twitter" target="_blank" href="https://twitter.com/home?status=http%3a%2f%2famoshyc.github.io%2fblog%2f2018%2fscientific-python-quickstart-1.html" title="Share to Twitter">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round"
            stroke-miterlimit="1.414">
            <path d="M16 3.038c-.59.26-1.22.437-1.885.517.677-.407 1.198-1.05 1.443-1.816-.634.37-1.337.64-2.085.79-.598-.64-1.45-1.04-2.396-1.04-1.812 0-3.282 1.47-3.282 3.28 0 .26.03.51.085.75-2.728-.13-5.147-1.44-6.766-3.42C.83 2.58.67 3.14.67 3.75c0 1.14.58 2.143 1.46 2.732-.538-.017-1.045-.165-1.487-.41v.04c0 1.59 1.13 2.918 2.633 3.22-.276.074-.566.114-.865.114-.21 0-.41-.02-.61-.058.42 1.304 1.63 2.253 3.07 2.28-1.12.88-2.54 1.404-4.07 1.404-.26 0-.52-.015-.78-.045 1.46.93 3.18 1.474 5.04 1.474 6.04 0 9.34-5 9.34-9.33 0-.14 0-.28-.01-.42.64-.46 1.2-1.04 1.64-1.7z"
                fill-rule="nonzero" />
        </svg>
    </a>
</div>

        </main>

        
        <footer>
    <div class="hr"></div>
    <p>
        Powered by <a href="https://gohugo.io/">Hugo</a> with theme
        <a href="https://github.com/amoshyc/hugo-zmd-theme">zmd</a>
    </p>
</footer>

        
        
            <script>
                anchors.options = {
                    placement: 'right',
                };
                anchors.add('.md-content > h1, .md-content > h2, .md-content > h3, .md-content > h4');
            </script>
        
</body>

</html>